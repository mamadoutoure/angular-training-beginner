<div class="mt-3">


<form [formGroup]="clientForm" (ngSubmit)="submitForm()" autocomplete="off">

  <div class="card ">

    <!--  - card header -->
    <div class="card-header bg-light">
      <h3 class="card-title text-dark">Créer un nouveau client</h3>

    </div>

    <!--  - card body -->
    <div class="card-body">

      <div class="form-group row">

        <div class="col-2">
          <label for="firstName">Prénom:</label>

        </div>

        <div class="col-4">
          <input formControlName="firstName" type="text" [ngClass]="setError(firstName)"  class="form-control" id="firstName" placeholder="">
        </div>

        <div class="col-2">
          <label for="lastName">Nom:</label>
        </div>

        <div class="col-4">

          <input formControlName="lastName" [ngClass]="setError(lastName)"  type="text" class="form-control" id="lastName" placeholder="">
        </div>


      </div>

      <div class="form-group row">

        <div class="col-2">
          <label for="dob">Date de Naissance : </label>
        </div>
        <div class="col-4">
          <input formControlName="dob"type="text" [ngClass]="setError(dob)"  class="form-control" id="dob" [bsConfig]="{ dateInputFormat: 'YYYY-MM-DD' }" bsDatepicker >
        </div>

        <div class="col-2">
          <label for="pob">Lieu de Naissance : </label>
        </div>
        <div class="col-4">
          <input formControlName="pob" type="text" [ngClass]="setError(pob)" class="form-control" id="pob" placeholder="">
        </div>


      </div>

      <div formGroupName="address" class="form-group row">
        <div class="col-1">
          <label for="rue">Rue:</label>
        </div>

        <div class="col-3 ">
          <input formControlName="rue" type="text" [ngClass]="setError(rue)" class="form-control" id="rue" placeholder="">
        </div>

        <div class="col-1">
          <label for="quartier">Quartier:</label>
        </div>

        <div class="col-3">
          <input formControlName="quartier" [ngClass]="setError(quartier)" type="text" class="form-control"  id="quartier" placeholder="">
        </div>

        <div class="col-1">
          <label for="ville">Ville:</label>
        </div>

        <div class="col-3">
          <input formControlName="ville" [ngClass]="setError(ville)" type="text" class="form-control" id="ville" placeholder="">
        </div>
      </div>




        <div class="form-group row">
          <div class="col-10">
            <h6>Type de Contact:</h6>
        </div>

        <div class="col-2">
          <button type="button" class="btn btn-outline-info" (click)="onAddContactEntry()"><i class="fa fa-plus"></i></button>
        </div>
        </div>


        <div class="form-group row" formArrayName="contacts"
             *ngFor="let contact of (clientForm.get('contacts')['controls']); let i = index;">

          <ng-container [formGroupName]="i">
          <div class="col-5">

            <select id="contact" class="form-control" [ngClass]="setError(contacts.at(i).get('contactType'))" formControlName="contactType">
              <option value="">Choisir un type de contact..</option>
              <option  *ngFor="let contact of contactCategories" [ngValue]="contact.code">{{contact.description}}</option>
            </select>
          </div>

          <div class="col-5">
            <input type="text" class="form-control" [ngClass]="setError(contacts.at(i).get('contactValue'))"  formControlName="contactValue" id="value" placeholder="">
          </div>

          <div class="col-2">
            <button type="button" class="btn btn-outline-danger" (click)="onRemoveContactEntry(i)"><i class="fa fa-trash"></i></button>
          </div>

        </ng-container>
        </div>





    </div>

    <!--  - card footer -->
    <div class="card-footer">
      <button type="submit" [ngClass]="{'disabled': clientForm.invalid }" class="btn btn-outline-success" [disabled]="clientForm.invalid"><i class="fa fa-save">&nbsp;</i>Sauvegarder</button>
    </div>


  </div>


</form>


</div>
